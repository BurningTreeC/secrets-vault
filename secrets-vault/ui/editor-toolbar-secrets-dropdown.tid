title: $:/plugins/BTC/secrets-vault/ui/editor-toolbar-secrets-dropdown

\whitespace trim

\procedure secret-prefix() §[secret:
\procedure secret-suffix() ]

\procedure insert-secret-actions()
<$action-sendmessage
	$message="tm-edit-text-operation"
	$param="replace-selection"
	text={{{ [<secretName>addprefix<secret-prefix>addsuffix<secret-suffix>] }}}
/>
\end

\procedure secret-button()
<$button class="tc-btn-invisible tc-popup-keep" actions=<<insert-secret-actions>>>
🔐 <<secretName>>
</$button>
\end

<div class="tc-editor-toolbar-secrets-dropdown">
	<$list filter="[[$:/secrets/vault]fields[]removeprefix[secret-]sort[]]" variable="secretEncodedName" emptyMessage="""
		<div class="tc-dropdown-item">
			<em>No secrets found</em>
		</div>
	""">
		<$let metaField={{{ [[meta-]addsuffix<secretEncodedName>] }}} secretName={{{ [[$:/secrets/vault]get<metaField>jsonget[originalName]] :else[<secretEncodedName>] }}}>
			<div class="tc-dropdown-item">
				<$transclude $variable="secret-button"/>
			</div>
		</$let>
	</$list>
<hr>
<div class="tc-dropdown-item">
<$navigator story="$:/StoryList" history="$:/HistoryList">
<$button class="tc-btn-invisible">
<$action-navigate $to="$:/plugins/BTC/secrets-vault/ui/vault-manager"/>
⚙️ Manage Vault
</$button>
</$navigator>
</div>
</div>